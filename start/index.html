<!DOCTYPE html>
<meta charset="UTF-8"/>
<title>Dungee</title>

<nav>
    <a href="/">Home</a>
    <a href="start">Start new game</a>
    <a href="play">Play an existing Dungee</a>    
</nav>
<h1>START</h1>
<button onclick="generarPIN()">START</button>
<button onclick="mostrarPreguntas()">TODO LISTO</button>

<p id = "pinEl"></p>
<p id="usersP"></p>
<p id="preguntitasP"></p>



<script>
let pin;

function generarPIN(){
    pin = Math.floor(Math.random()*9000)+1000;
    pinEl.innerText = pin;

    setInterval(obtenerUsuarios, 10000);

}

function obtenerUsuarios(){
    fetch(`https://dungee-tano.vercel.app/api/damelosusers?pin=${pin}`)
    .then(datos => datos.json())
    .then(json => {
        let usersList = ""


        for (const x in json.users){
            usersList += (json.users[x].name) + "   "

        }
        usersP.innerText = usersList
        });


}

function mostrarPreguntas(){
    fetch(`https://dungee-tano.vercel.app/api/damelaspreguntas.json`)
    .then(preguntitas => preguntitas.json())
    .then(json => {
        let pregunList = ""

        for (const y in json.preguntitas){
            pregunList += (json.preguntitas[y])
        }
        preguntitasP.innerText = pregunList
    })



}
</script> 