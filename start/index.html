<!DOCTYPE html>
<meta charset="UTF-8"/>
<title>Dungee</title>

<nav>
    <a href="/">Home</a>
    <a href="start">Start new game</a>
    <a href="play">Play an existing Dungee</a>    
</nav>

<div id="loDeArriba">
    <h1>START</h1>
    <button onclick="generarPIN()">START</button>
    <button onclick="mostrarPreguntas()">GENERAR PREGUNTAS</button>
    <p id = "pinEl"></p>
    <p id="usersEl"></p>
</div>

<div id="preguntasEl"></div>



<script>
let pin;

function generarPIN(){
    pin = Math.floor(Math.random()*9000)+1000;
    pinEl.innerText = pin;

    setInterval(obtenerUsuarios, 10000);

}

function obtenerUsuarios(){
    fetch(`https://dungee-tano.vercel.app/api/damelosusers?pin=${pin}`)
    .then(datos => datos.json())
    .then(json => {
        let usersList = ""


        for (const x in json.users){
            usersList += (json.users[x].name) + "   "

        }
        usersEl.innerText = usersList
        });


}

function mostrarPreguntas(){
    ocultarCosasArriba();


    fetch(`https://dungee-tano.vercel.app/api/damelaspreguntas`)
    .then(preguntitas => preguntitas.json())
    .then(questions => {
        for ( const pregunta in questions.preguntas){
        
        preguntasEl.innerHTML += "<h1>" + questions.preguntas[pregunta].pregunta + "</h1>"
        preguntasEl.innerHTML += "<h2>" + questions.preguntas[pregunta].res1 + "</h2>"
        preguntasEl.innerHTML += "<h2>" + questions.preguntas[pregunta].res2 + "</h2>"
        preguntasEl.innerHTML += "<h2>" + questions.preguntas[pregunta].res3 + "</h2>"
        preguntasEl.innerHTML += "<h2>" + questions.preguntas[pregunta].res4 + "</h2>"

    } 
    })
}


function ocultarCosasArriba(){
    loDeArriba.classList.toggle("oculto");
}


</script> 









<style>
    .oculto{
        animation: desaparecer 4s

    }
    @keyframes desaparecer {
        99% {transform: scaleY(0);}
    }
        100% {height: 0}
</style>